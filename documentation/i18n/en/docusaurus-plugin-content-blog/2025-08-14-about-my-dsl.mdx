---
slug: about-my-dsl
title: About My Query Language ðŸ’¬
authors: [Nicolas]
tags: [story]
---

I've rethought the idea of [my language](/blog/MDQL) several times â€” and it has changed radically! ðŸ”„

<!-- truncate -->

## History of My DSL: From MDQL to MQL

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

<Tabs>
  <TabItem value="similar" label="Similar to GraphQL" default>
    This version is described in [this blog post](/blog/MDQL) and has similarities to GraphQL ðŸ‘¥
  </TabItem>
  <TabItem value="rethinking" label="Syntax Change">
    Changed GraphQL syntax to JSON for its universality ðŸ“¦
    Here's what it looked like (approximately):
    ```json
    {
        "meta": {
            "request_goal": "Get character data",
            "agent_name": "Gemini",
            "request_method": "select"
        },
        "query_block": {
            "file_path": {
                "folder_name": "Characters",
                "file_name": "Kowalski, the bloody reaper"
            },
            "sections_to_retrieve": [
                {
                    "YAML": {
                        "name": "get_text"
                    }
                },
                {
                    "Bio": {
                        "Character": "get_text"
                    }
                },
                {
                    "Abilities": {
                        "list_elements": [1, 3]
                    }
                }
            ]
        }
    }
    ```
  </TabItem>
  <TabItem value="rethinking2" label="Syntax Change 2">
    Changed JSON syntax to YAML for a more concise look: it's less bulky while maintaining functionality âœ¨
    Here's what it looked like (approximately):
    ```yaml
    meta:
        request_goal: Get character data
        agent_name: Gemini
        request_method: select
    
    query_block:
        file_path:
            folder_name: Characters
            file_name: Kowalski, the bloody reaper
        
        sections_to_retrieve:
            - YAML:
                name: get_text
            - Bio:
                Character: get_text
            - Abilities:
                list_elements: [1, 3]
    ```
  </TabItem>
  <TabItem value="return" label="Complete Replacement ðŸš€">
    From something vaguely resembling GraphQL (if you squint hard ðŸ™ˆ) I came to SQL.
    :::info What it was before
    The agent specified the full path to the required location, from the root to the text in some nested heading.
    :::
    Now it's a maximally SQL-like syntax: instead of specifying paths, simply listing headings to extract text from.

    Simply put, the schema was simplified to the minimum and now matches the key idea of the project âœ…
    
    Here's what it looks like now:
    ```sql
    -- Get text from two character sections ðŸ‘¤
    SELECT text
    FROM "ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ", "Ð˜ÑÑ‚Ð¾Ñ€Ð¸Ñ"
    FILE "ÐŸÐµÑ€ÑÐ¾Ð½Ð°Ð¶Ð¸/character";
    
    -- Get first 3 events with fields ðŸ“…
    SELECT title, tags, text
    FROM "Ð¡Ð¾Ð±Ñ‹Ñ‚Ð¸Ñ"
    FILE "Ð¡Ð¾Ð±Ñ‹Ñ‚Ð¸Ñ/events"
    LIMIT 3;
    
    -- Get items with "Ñ‡ÐµÑ€Ð½Ñ‹Ð¹ Ð²Ð¾Ñ€Ð¾Ð½" tag and hunger state ðŸ¦…
    SELECT items
    FROM "Ð¡Ð¾Ð±Ñ‹Ñ‚Ð¸Ñ"
    FILE "Ð¡Ð¾Ð±Ñ‹Ñ‚Ð¸Ñ/events"
    WHERE tags INCLUDE "Ñ‡ÐµÑ€Ð½Ñ‹Ð¹ Ð²Ð¾Ñ€Ð¾Ð½"
      AND state INCLUDE "Ð³Ð¾Ð»Ð¾Ð´ > 50";
    ```
  </TabItem>
</Tabs>